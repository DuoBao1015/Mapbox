<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
   <title>Show and hide layers</title>
   <meta name="viewport" content="initial-scale=18,maximum-scale=1,user-scalable=yes" />
   <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
   <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
   <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
   <style>
   *{
      margin: 0;
      margin: 0;
   }
   body,html{
      
   }
   #map {
       position: absolute;
       top: 0;
       bottom: 0;
       width: 100%;
   }
   #menu{
          position: absolute;
          z-index: 100;
          top: 200px;
          right: 20px;
          border-radius: 1px;
          width: 60px;
          font-family: 'Open Sans', sans-serif;
          background-color: rgba(0,0,0, 0.5);
      }
      .nav_box{
         overflow: hidden;
      }
      .nav_item{
         float: left;width: 80%;
      }
      .nav_item a{
         display: block;
         width: 50px; /*X-space between*/
         border-radius: 20px;
         font-size: 18px; /*text size in menu*/
         text-align: center;
         margin-bottom: 10px;
         word-break:break-all;
         padding: 3px;
         line-height: 10px;/*Y-space hight*/
         cursor: pointer;
         transition: all .2s ease;
      }
      .nav_item a:hover{
         background-color: rgba(0,0,0,.1);
      }
      .active_on{
         background-color: rgba(0,0,0,.18);
         /* color: #fff !important; */
      }
      a{
         color: white; /*'all' and 'clear' color*/
      }
      .cln {
         text-align: center;
         padding-bottom: 10px;
         color: #3074a4;
      }
      .cln a{
         margin: 10px; /* space between the 'all' and 'clean' */
         font-size: 12px; /*'all' and 'clean' text size*/
      }
   </style>
   
   </head>
   <body>
      <nav id="menu">
         <div class="cln">
            <a>ALL</a>
            <a>CLEAR</a>
         </div>
         <div class="nav_box">
         <div class="nav_item a">
            <a style="color:rgba(80, 104, 68,0.5) ;" class="on">1890</a>
            <a style="color:rgba(80, 171, 68,0.5) ;">1900</a>
            <a style="color:rgba(0, 134, 68,0.5) ;">1910</a>
            <a style="color:rgba(189, 32, 38,0.5) ;">1920</a>
            <a style="color:rgba(80, 171, 68,0.5) ;">1930</a>
            <a style="color:rgba(0, 134, 68,0.5) ;">1940</a>
            <a style="color:rgba(189, 32, 38,0.5) ;">1950</a>
            <a style="color:rgba(80, 171, 68,0.5) ;">1960</a>
            <a style="color:rgba(0, 134, 68,0.5) ;">1970</a>
            <a style="color:rgba(189, 32, 38,0.5) ;">1980</a>
            <a style="color:rgba(189, 32, 38,0.5) ;">1990</a>
            <a style="color:rgba(189, 32, 38,0.5) ;">2000</a>
            <a style="color:rgba(189, 32, 38,0.5) ;">2010</a>  
         </div>
         <script>
            $(function(){
               $('.nav_item a').each(function(){
                  $(this).click(function(){
                     var t=$(this).text();
                     $("#frame").attr('src',t+'.html');
                     var tColor=$(this).css('color');
                     $('.nav_item a').each(function(){
                        var tColor2=$(this).css('color');
                        tColor2=tColor2.replace("0.95","0.5");
                        $(this).css('color',tColor2);
                     })
                     tColor=tColor.replace("0.5","0.95");
                     $(this).css('color',tColor);
                  })
               })
            })
         </script>
         
      </nav>



   <div id="map"></div>
   <script>
      mapboxgl.accessToken = 'pk.eyJ1Ijoic2NvdHRtYWhveSIsImEiOiJjajMzY3JuYmMwMGE1MndxNjQwdHFxZm0zIn0.Wg6c630lEtSOEuqpRDvItw';
      var map = new mapboxgl.Map({
         container: 'map',
         style: 'mapbox://styles/scottmahoy/ckiaq0k4h7vlv19phjm8hvnyq',
         zoom: 10,
         center: [-118.25, 33.9]
      });
      map.on('load', function () {
      // add source and layer for spanish
      // Year for 1890
         map.addSource('1890', {
            type: 'vector',
            url: 'mapbox://scottmahoy.cmrn0dxu'
         });//end addsource
         map.addLayer({
            'id': '1890',
            'type': 'fill',
            'source': '1890',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(80, 104, 68,0.5)'
            },
            'source-layer':
            '1890-6rizu5'
         });

         // Year for 1900
         map.addSource('1900', {
            type: 'vector',
            url: 'mapbox://scottmahoy.aodza4f9'
         });//end addsource
         map.addLayer({
            'id': '1900',
            'type': 'fill',
            'source': '1900',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(80, 171, 68,1)'
            },
            'source-layer':
            '1900-9heqdm'
         });

         // Year for 1900
         map.addSource('1900', {
            type: 'vector',
            url: 'mapbox://scottmahoy.9otrwyst'
         });//end addsource
         map.addLayer({
            'id': '1900',
            'type': 'fill',
            'source': '1900',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(80, 171, 68,1)'
            },
            'source-layer':
            '1900v2-2sr9bl'
         });

                  // Year for 1910
         map.addSource('1910', {
            type: 'vector',
            url: 'mapbox://scottmahoy.4741hlse'
         });//end addsource
         map.addLayer({
            'id': '1910',
            'type': 'fill',
            'source': '1910',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(0, 134, 68,1)'
            },
            'source-layer':
            '1910s-3tm29b'
         });

         // Year for 1910
         map.addSource('1910', {
            type: 'vector',
            url: 'mapbox://scottmahoy.7aa8uo2k'
         });//end addsource
         map.addLayer({
            'id': '1910',
            'type': 'fill',
            'source': '1910',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(0, 134, 68,1)'
            },
            'source-layer':
            '1910v2-9ldg4a'
         });

         // Year for 1910
         map.addSource('1910', {
            type: 'vector',
            url: 'mapbox://scottmahoy.8n6qvxlp'
         });//end addsource
         map.addLayer({
            'id': '1910',
            'type': 'fill',
            'source': '1910',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(0, 134, 68,1)'
            },
            'source-layer':
            '1910s-6tlj73'
         });

         // Year for 1910
         map.addSource('1910', {
            type: 'vector',
            url: 'mapbox://scottmahoy.6xsuoxiw'
         });//end addsource
         map.addLayer({
            'id': '1910',
            'type': 'fill',
            'source': '1910',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(0, 134, 68,1)'
            },
            'source-layer':
            '1910s2-8a9qi6'
         });


         map.addLayer({
            'id': 'ALL'
         });

         map.addLayer({
            'id': 'CLEAR'
         })

      });//end onload function


   var btns=$('#menu a')
    btns.each(function(){
      $(this).click(function(e){
         var clickedLayer = $(this).text();
         if (clickedLayer == 'ALL') {
         btns.each(function(index){
            var layer = btns.eq(index).text();
            var visibility = map.getLayoutProperty(layer, 'visibility');
            if (visibility == 'none') {
               map.setLayoutProperty(layer, 'visibility', 'visible');
               this.className = '';
                $('#menu a').eq(index).addClass('active_on');
            }
            else {
               this.className = 'active';
               map.setLayoutProperty(layer, 'visibility', 'none');
            }
         })
              
         }//
         
         if (clickedLayer == 'CLEAR') {
          btns.each(function(index){
            var layer = btns.eq(index).text();
               var visibility = map.getLayoutProperty(layer, 'visibility');
               if (visibility == 'visible') {
                  map.setLayoutProperty(layer, 'visibility', 'none');
                $('#menu a').eq(index).removeClass('active_on');
                  this.className = '';
               }
           })
         }//
         
         //
         
         if (clickedLayer == '1890') {
                       var btn_all=$('.'+clickedLayer+' a');
                       btn_all.each(function(index){
                         var layer = btn_all.eq(index).text();;
                            var visibility = map.getLayoutProperty(layer, 'visibility');
                         if (visibility == 'none') {
                            map.setLayoutProperty(layer, 'visibility', 'visible');
                                          btn_all.eq(index).addClass('active_on');
                         }
                         else {
                            map.setLayoutProperty(layer, 'visibility', 'none');
                                          btn_all.eq(index).removeClass('active_on')
                         } 
                       })
         }
         
      
         
         
         var visibility = map.getLayoutProperty(clickedLayer, 'visibility');
         if (visibility === 'none') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
            this.className = 'active_on';
            
         } 
         else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
         }
         
         //
      });
      
      if (map.getLayer("cluster-count")) {
         map.removeLayer("cluster-count");
      }
      
      
   })


map.addControl(new mapboxgl.NavigationControl(), 'top-left');

map.add
 
</script>
 
<script>

</script>
 
   </body>
</html>

